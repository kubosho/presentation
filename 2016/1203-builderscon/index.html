<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <link rel="stylesheet" href="../lib/talkie.min.css">
  <link rel="stylesheet" href="../lib/talkie-default.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/monokai_sublime.min.css">
</head>
<body>


<template type="text/x-markdown"
  layout="bullets">
# CSSを破綻させない


</template>

<template type="text/x-markdown"
  layout="bullets">
## TL;DR

- CSS設計はデザイナーも巻き込んでやるもの
- CSS設計の方針を定めてガイドラインを目に見える場所に置いておこう
  - CSSの設計は詳細度の低さとプロパティと値の定義をできるだけ少なくするためにある
- CSS設計が破綻していないかツールを使って検知しよう


</template>

<template type="text/x-markdown"
  layout="bullets">
## CSS設計の破綻の定義

- 値の上書きが、4つ以上のセレクタを書かないとできない
- `!important` だらけ


</template>

<template type="text/x-markdown"
  layout="bullets">
## CSS設計はなぜ破綻するのか？

- デザインの意図を正しく理解していない
- 上書き合戦
- マルチクラス設計の場合は過度な使い回し
- ルールセットの定義場所の方針がない
    - ファイル・ディレクトリともに


</template>

<template type="text/x-markdown"
  layout="bullets">
## ルールセットの上書き

CSSフレームワークを使っていると起きがち


</template>

<template type="text/x-markdown"
  layout="bullets">
## デザインの意図を正しく理解する #とは

たとえばタイトルと内容を区切る線


</template>

<template type="text/x-markdown"
  layout="bullets">
![はてなブログの個別記事](img/blog-single.png)


</template>

<template type="text/x-markdown"
  layout="bullets">
## CSS設計

- 「CSS設計」は何から何までを指すのか？
    - HTMLのマークアップも含まれる
    - HTMLの要素で意味を持たせることにより、セレクタの名前も意味のある名前にできる
- OOCSS, MindBEMding, SMACSS, Suit CSS, FLOCSS, ECSS...
  - いろいろある
  - 望むのは詳細度の低さ、プロパティと値をできるだけ定義しないこと
- CSSフレームワークを使うのならそのレールから外れない
    - 上書きが多く発生すると破綻する

* クラス名をPPAPにする
* pen, pineapple, apple, pen


</template>

<template type="text/x-markdown"
  layout="bullets">

## セレクタ設計の破綻を検知する

- css-stats
- stylestats


</template>

<template type="text/x-markdown"
  layout="bullets">

> HTMLはBEMツリーで説明するだけに止めて、CSSコンポーネントはSassのplaceholderで秘匿するのがいい気がしてる。HTMLからは何もCSS設計してないように見えるけど、Sassでやってる、的な。placeholderでなくコピペしたらECSSっぽくなる。
> CSSルールセットは未来を予測できないから、クラス名にスタイルの仕事を任せると.c-だの.p-だの.u-だの揉める。仮に
衝突しないように組めたとしても似て非なるデザインが出た時に差分をどこに吸収させるかで揉める。結果ヘルパークラスW杯になると思う。
> JSでコンポーネント開発がうまくいくのはJSは見た目と切り離されているからで、CSSはコンポーネント化しても親や前後の要素によって見た目を変えざるをえない。CSSコンポーネントを構造依存から切り離すにはスタイル宣言の少ないルールセット＋ヘルパークラスW杯しかないんだろうか？
> とはいえ、デザインによってはヘルパークラス盛り合わせでもあり
> 共通化して使いまわせる閾値が案件ごとにあって、コンポーネント（っぽいもの）の数とかページ数とかそもそものデザインとかいろいろあるから、つまりCSSとは人生をかけた戦いなのである
> 似たようなデザインにおいて同じルールセットを使いまわすという手法が、たとえそれでうまくいったシーンがあったとしても、根本的には幻想なのではないか、と思っている
> とりあえずCSS設計はフロントだけでやるものじゃないのは間違いないけど、CSSがデザインを制約してはいけないとも思う。
> http://qiita.com/BYODKM/items/8c777db2d89f4e830c93


</template>

<template type="text/x-markdown"
  layout="bullets">

## 想定Q&A

- テストはどうするのか？たとえばプロパティを無くしたり上書きしたときはレイアウトが崩れていないことをどうやって見るのか？
- すでに破綻しているCSS（プロジェクトに途中から入ってそこのCSSが破綻している）はどうやって改善していけるのか？


</template>

<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
<script src="../lib/talkie.min.js"></script>
<script>
  var talkie = Talkie({
    wide: false
  })
  talkie.key('space').subscribe(talkie.next$)
  talkie.key('s').subscribe(talkie.next$)
  talkie.key('n').subscribe(talkie.next$)
  talkie.key('a').subscribe(talkie.prev$)
  talkie.key('p').subscribe(talkie.prev$)

  document.addEventListener('DOMContentLoaded', function() {
    talkie.changed.subscribe(function(current) {
      console.info(talkie.notes[current.getAttribute('data-page')])
    })
  })
</script>
</body>
</html>
